/**!
 * zh-sdk.js v0.3.0
 * (c) 2016-2017
 * author bojan
 */
!function(){"use strict";function e(e){s.push(e),1==s.length&&l()}function n(){for(;s.length;)s[0](),s.shift()}function t(e){this.a=d,this.b=void 0,this.f=[];var n=this;try{e(function(e){i(n,e)},function(e){a(n,e)})}catch(e){a(n,e)}}function r(e){return new t(function(n,t){t(e)})}function o(e){return new t(function(n){n(e)})}function i(e,n){if(e.a==d){if(n==e)throw new TypeError;var t=!1;try{var r=n&&n.then;if(null!=n&&"object"==typeof n&&"function"==typeof r)return void r.call(n,function(n){t||i(e,n),t=!0},function(n){t||a(e,n),t=!0})}catch(n){return void(t||a(e,n))}e.a=0,e.b=n,c(e)}}function a(e,n){if(e.a==d){if(n==e)throw new TypeError;e.a=1,e.b=n,c(e)}}function c(n){e(function(){if(n.a!=d)for(;n.f.length;){var e=n.f.shift(),t=e[0],r=e[1],o=e[2],e=e[3];try{0==n.a?o("function"==typeof t?t.call(void 0,n.b):n.b):1==n.a&&("function"==typeof r?o(r.call(void 0,n.b)):e(n.b))}catch(n){e(n)}}})}function u(e){return new t(function(n,t){var r=0,i=[];0==e.length&&n(i);for(var a=0;a<e.length;a+=1)o(e[a]).c(function(t){return function(o){i[t]=o,(r+=1)==e.length&&n(i)}}(a),t)})}function f(e){return new t(function(n,t){for(var r=0;r<e.length;r+=1)o(e[r]).c(n,t)})}var l,s=[];l=function(){setTimeout(n)};var d=2;t.prototype.g=function(e){return this.c(void 0,e)},t.prototype.c=function(e,n){var r=this;return new t(function(t,o){r.f.push([e,n,t,o]),c(r)})},window.Promise||(window.Promise=t,window.Promise.resolve=o,window.Promise.reject=r,window.Promise.race=f,window.Promise.all=u,window.Promise.prototype.then=t.prototype.c,window.Promise.prototype.catch=t.prototype.g)}(),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.zh=n()}(this,function(){"use strict";function e(e,n){return null!=n&&e instanceof n}function n(t,r,o,i,c){function u(t,o){if(null===t)return null;if(0===o)return t;var d,h;if("object"!=(void 0===t?"undefined":$(t)))return t;if(e(t,q))d=new q;else if(e(t,Q))d=new Q;else if(e(t,X))d=new X(function(e,n){t.then(function(n){e(u(n,o-1))},function(e){n(u(e,o-1))})});else if(n.__isArray(t))d=[];else if(n.__isRegExp(t))d=new RegExp(t.source,a(t)),t.lastIndex&&(d.lastIndex=t.lastIndex);else if(n.__isDate(t))d=new Date(t.getTime());else{if(s&&Buffer.isBuffer(t))return d=new Buffer(t.length),t.copy(d),d;e(t,Error)?d=Object.create(t):void 0===i?(h=Object.getPrototypeOf(t),d=Object.create(h)):(d=Object.create(i),h=i)}if(r){var p=f.indexOf(t);if(p!=-1)return l[p];f.push(t),l.push(d)}e(t,q)&&t.forEach(function(e,n){var t=u(n,o-1),r=u(e,o-1);d.set(t,r)}),e(t,Q)&&t.forEach(function(e){var n=u(e,o-1);d.add(n)});for(var y in t){var v;h&&(v=Object.getOwnPropertyDescriptor(h,y)),v&&null==v.set||(d[y]=u(t[y],o-1))}if(Object.getOwnPropertySymbols)for(var g=Object.getOwnPropertySymbols(t),y=0;y<g.length;y++){var b=g[y],m=Object.getOwnPropertyDescriptor(t,b);(!m||m.enumerable||c)&&(d[b]=u(t[b],o-1),m.enumerable||Object.defineProperty(d,b,{enumerable:!1}))}if(c)for(var w=Object.getOwnPropertyNames(t),y=0;y<w.length;y++){var j=w[y],m=Object.getOwnPropertyDescriptor(t,j);m&&m.enumerable||(d[j]=u(t[j],o-1),Object.defineProperty(d,j,{enumerable:!1}))}return d}"object"===(void 0===r?"undefined":$(r))&&(o=r.depth,i=r.prototype,c=r.includeNonEnumerable,r=r.circular);var f=[],l=[],s="undefined"!=typeof Buffer;return void 0===r&&(r=!0),void 0===o&&(o=1/0),u(t,o)}function t(e){return Object.prototype.toString.call(e)}function r(e){return"object"===(void 0===e?"undefined":$(e))&&"[object Date]"===t(e)}function o(e){return"object"===(void 0===e?"undefined":$(e))&&"[object Array]"===t(e)}function i(e){return"object"===(void 0===e?"undefined":$(e))&&"[object RegExp]"===t(e)}function a(e){var n="";return e.global&&(n+="g"),e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),n}function c(e){var t=n(e);if("object"===(void 0===t?"undefined":$(t)))for(var r in t)t[r]=c(t[r]);else"string"==typeof t?t=encodeURI(t):"function"!=typeof t&&(t=t.toString());return t}function u(e){return decodeURIComponent(e)}function f(e){return"_"+(e=encodeURI(e).replace(/%/g,""))+"_Callback"}function l(e,n){ee.registerHandler(e,function(e){e=u(e);try{e=JSON.parse(e)}catch(e){}finally{n(e)}})}function s(e,n){return new Promise(function(t,r){if(!e||"string"!=typeof e)return void r(e+" \u7f3a\u5c11\u53c2\u6570");var o={taskId:e};n&&(o.param=c(n)),ee.callHandler("NativeHybrid",o,function(e){e=u(e);try{e=JSON.parse(e)}catch(e){}finally{t(e)}})})}function d(e,n){ne[e]=n}function h(e){var n=[];return e.backgroundColor&&n.push(g(e.backgroundColor)),e.title&&n.push(p(e.title)),e.fontSize&&n.push(v(e.fontSize)),e.color&&n.push(y(e.color)),n.length>0?Promise.all(n):void 0}function p(e){return s("zhhybrid/titleBar/title/text",{content:e})}function y(e){return s("zhhybrid/titleBar/title/textColor",{color:e})}function v(e){return s("zhhybrid/titleBar/title/fontSize",{size:e})}function g(e){return s("zhhybrid/titleBar/background/color",{color:e})}function b(e,n){var t=e.txt?e.txt:e.navBtnType?e.navBtnType:"";return e.handlerName=f(t),l(e.handlerName,n),s("zhhybrid/titleBar/button",e)}function m(e,n){return b({txt:e},n)}function w(e,n){return b({navBtnType:e},n)}function j(e){s("zhhybrid/navigator/openGroup",e)}function B(e){s("zhhybrid/navigator/openPage",e)}function O(){s("zhhybrid/navigator/closeCurGroup")}function S(){s("zhhybrid/navigator/closeCurPage")}function z(e,n){return e.handlerName=f("chooseIndustryEvent"),l(e.handlerName,function(e){n(e.param)}),s("zhhybrid/industry/secondLevel",e)}function P(e,n){return e.handlerName=f("chooseImageEvent"),l(e.handlerName,function(e){n(e.param)}),s("zhhybrid/photo/upload",e)}function _(e,n){return e.quality&&"low"!==e.quality&&(e.urls=E(e.urls,e.quality)),e.quality&&delete e.quality,e.handlerName=f("previewImageEvent"),l(e.handlerName,function(e){for(var t=0;t<e.param.deleteUrls.length;t++)e.param.deleteUrls[t]=x(e.param.deleteUrls[t]);n(e.param)}),s("zhhybrid/photo/preview",e)}function E(e,n){var t="";switch(n){case"origin":t="_o";break;case"high":t="_l"}for(var r=[].concat(e),o=0;o<r.length;o++)r[o]=N(r[o],t);return r}function N(e,n){return e.replace(/\s?(\w+)(\.jpg|jpeg|png)/i,"$1"+n+"$2")}function x(e){return e.replace(/\s?(\w+)(_l|_o)(\.jpg|jpeg|png)/i,"$1$3")}function I(e){return e.actions.forEach(function(e){te[e.tagId=f("showActionSheetEvent"+e.name)]=e.handlerEvent,delete e.handlerEvent}),e.handlerName=f("showActionSheetEvent"),l(e.handlerName,function(e){var n=e.param;te[n.tagId](n)}),s("zhhybrid/dialog/actionsheet",e)}function T(e){re.wxTimeLine=e}function C(e){re.wxMessage=e}function k(e){}function A(e){re.shearPlate=e}function D(e){re.impress=e}function H(){var e=re;return e.handlerName=f("showShareMenuEvent"),l(e.handlerName,function(n){var t=e[n.tagId];switch(n.code){case 200:t.success&&t.success();break;case 400:t.cancel&&t.cancel()}t.complete&&t.complete()}),s("zhhybrid/dialog/share",e)}function M(){return s("zhhybrid/auth/realname")}function R(e){d("zhhybrid/auth/realname",e)}function J(){return s("zhhybrid/guide/userinfo")}function W(e){d("zhhybrid/guide/userinfo",e)}function V(e){var n={};n.sign=e;for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return n.args=r,s("zhhybrid/Broadcast",n)}function G(e,n){oe[e]=n,l("HybridH5Notification",function(e){oe[e.param.sign].apply(this,e.param.args)})}function U(e){e()}var q,L="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),F=L&&window.navigator.userAgent.toLowerCase(),$=(F&&F.indexOf("android"),F&&/iphone|ipad|ipod|ios/.test(F),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),K=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};try{q=Map}catch(e){q=function(){}}var Q;try{Q=Set}catch(e){Q=function(){}}var X;try{X=Promise}catch(e){X=function(){}}n.clonePrototype=function(e){if(null===e)return null;var n=function(){};return n.prototype=e,new n},n.__objToStr=t,n.__isDate=r,n.__isArray=o,n.__isRegExp=i,n.__getRegExpFlags=a;var Y=[],Z=[],ee=window.WebViewJavascriptBridge?window.WebViewJavascriptBridge:function(){var e={callHandler:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];Y.push(function(){window.WebViewJavascriptBridge.callHandler.apply(window.WebViewJavascriptBridge,n)})},registerHandler:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];Z.push(function(){window.WebViewJavascriptBridge.registerHandler.apply(window.WebViewJavascriptBridge,n)})}},n=function(e){for(ee=e;Z.length>0;){var n=Z.shift();n()}for(;Y.length>0;){var n=Y.shift();n()}};return window.WVJBCallbacks=[n],setTimeout(function(){var e=document.createElement("iframe");e.style.display="none",e.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(e),setTimeout(function(){document.documentElement.removeChild(e)},0)},0),e}(),ne={};!function(){l("HybridNativeNotification",function(e){var n=ne[e.type],t="success"in n?n.success:function(){},r="fail"in n?n.fail:function(){},o="complete"in n?n.complete:function(){};switch(e.code){case 200:case 501:t(e.type);break;case 500:r(e.type)}o(e.type)})}();var te={},re={},oe={};return K({},Object.freeze({setNavigationBar:h,setNavigationBarTitle:p,setNavigationBarFontColor:y,setNavigationBarFontSize:v,setNavigationBarBackgroundColor:g,showTxtRightButton:m,showGraphicalButton:w,navigateTo:j,redirectTo:B,navigateBack:O,redirectBack:S,chooseIndustry:z,chooseImage:P,previewImage:_,showActionSheet:I,onMenuShareWxTimeLine:T,onMenuShareWxMessage:C,onMenuShareFeed:k,onMenuShareShearPlate:A,onMenuShareShearImpress:D,showShareMenu:H,authstep:M,notifyAuthstep:R,profileGuide:J,notifyProfileGuide:W,emitBroadcast:V,onBroadcast:G}),Object.freeze({ready:U}))});