/**!
 * zh-sdk.js v0.0.1
 * (c) 2016-2017
 * author bojan
 */
!function(){"use strict";function t(t){d.push(t),1==d.length&&l()}function e(){for(;d.length;)d[0](),d.shift()}function n(t){this.a=s,this.b=void 0,this.f=[];var e=this;try{t(function(t){r(e,t)},function(t){a(e,t)})}catch(t){a(e,t)}}function o(t){return new n(function(e,n){n(t)})}function i(t){return new n(function(e){e(t)})}function r(t,e){if(t.a==s){if(e==t)throw new TypeError;var n=!1;try{var o=e&&e.then;if(null!=e&&"object"==typeof e&&"function"==typeof o)return void o.call(e,function(e){n||r(t,e),n=!0},function(e){n||a(t,e),n=!0})}catch(e){return void(n||a(t,e))}t.a=0,t.b=e,c(t)}}function a(t,e){if(t.a==s){if(e==t)throw new TypeError;t.a=1,t.b=e,c(t)}}function c(e){t(function(){if(e.a!=s)for(;e.f.length;){var t=e.f.shift(),n=t[0],o=t[1],i=t[2],t=t[3];try{0==e.a?i("function"==typeof n?n.call(void 0,e.b):e.b):1==e.a&&("function"==typeof o?i(o.call(void 0,e.b)):t(e.b))}catch(e){t(e)}}})}function u(t){return new n(function(e,n){var o=0,r=[];0==t.length&&e(r);for(var a=0;a<t.length;a+=1)i(t[a]).c(function(n){return function(i){r[n]=i,(o+=1)==t.length&&e(r)}}(a),n)})}function f(t){return new n(function(e,n){for(var o=0;o<t.length;o+=1)i(t[o]).c(e,n)})}var l,d=[];l=function(){setTimeout(e)};var s=2;n.prototype.g=function(t){return this.c(void 0,t)},n.prototype.c=function(t,e){var o=this;return new n(function(n,i){o.f.push([t,e,n,i]),c(o)})},window.Promise||(window.Promise=n,window.Promise.resolve=i,window.Promise.reject=o,window.Promise.race=f,window.Promise.all=u,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype.catch=n.prototype.g)}(),function(){function t(t,e){l[t]=e}function e(t,e,n){2==arguments.length&&"function"==typeof e&&(n=e,e=null),o({handlerName:t,data:e},n)}function n(){p=!1}function o(t,e){if(e){var n="cb_"+b+++"_"+(new Date).getTime();h[n]=e,t.callbackId=n}f.push(t),u.src=d+"://"+s}function i(){var t=JSON.stringify(f);return f=[],t}function r(t){function e(){var e,n=JSON.parse(t);if(n.responseId){if(!(e=h[n.responseId]))return;e(n.responseData),delete h[n.responseId]}else{if(n.callbackId){var i=n.callbackId;e=function(t){o({handlerName:n.handlerName,responseId:i,responseData:t})}}var r=l[n.handlerName];r?r(n.data,e):console.log("WebViewJavascriptBridge: WARNING: no handler for message from ObjC:",n)}}p?setTimeout(e):e()}function a(t){r(t)}function c(){var t=window.WVJBCallbacks;delete window.WVJBCallbacks;for(var e=0;e<t.length;e++)t[e](WebViewJavascriptBridge)}if(!window.WebViewJavascriptBridge){window.onerror||(window.onerror=function(t,e,n){console.log("WebViewJavascriptBridge: ERROR:"+t+"@"+e+":"+n)}),window.WebViewJavascriptBridge={registerHandler:t,callHandler:e,disableJavscriptAlertBoxSafetyTimeout:n,_fetchQueue:i,_handleMessageFromObjC:a};var u,f=[],l={},d="https",s="__wvjb_queue_message__",h={},b=1,p=!0;u=document.createElement("iframe"),u.style.display="none",u.src=d+"://"+s,document.documentElement.appendChild(u),t("_disableJavascriptAlertBoxSafetyTimeout",n),setTimeout(c,0)}}(),function(t,e){t.WebViewJavascriptBridge?e(WebViewJavascriptBridge):t.WVJBCallbacks?t.WVJBCallbacks.push(e):(t.ZHHybridCallbacks=[],t.zh={ready:function(e){t.ZHHybridCallbacks.push(e)}},t.WVJBCallbacks=[e],void setTimeout(function(){var t=document.createElement("iframe");t.style.display="none",t.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(t),setTimeout(function(){document.documentElement.removeChild(t)},0)},0))}(window,function(t){!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.zh=e()}(this,function(){"use strict";function e(t){if("object"===(void 0===t?"undefined":g(t))){for(var n in t)t[n]=e(t[n]);t=JSON.stringify(t)}else"string"==typeof t?t=encodeURI(t):"function"!=typeof t&&(t=t.toString());return t}function n(e,n){t.registerHandler(e,n)}function o(n,o){return new Promise(function(i,r){if(!n||"string"!=typeof n)return void r(n+" \u7f3a\u5c11\u53c2\u6570");var a={taskId:n};o&&(a.param=e(o)),t.callHandler("NativeHybrid",a,function(t){i(t)})})}function i(t){t.backgroundColor&&o("zhhybrid/titleBar/background/color",t.backgroundColor),t.text&&o("zhhybrid/titleBar/title/text",t.text),t.fontSize&&o("zhhybrid/titleBar/title/fontSize",t.fontSize),t.color&&o("zhhybrid/titleBar/title/textColor",t.color)}function r(t){return o("zhhybrid/titleBar/title/text",t)}function a(t){return o("zhhybrid/titleBar/title/textColor",t)}function c(t){return o("zhhybrid/titleBar/title/fontSize",t)}function u(t){return o("zhhybrid/titleBar/background/color",t)}function f(t){return"_"+(t=encodeURI(t).replace(/%/g,""))+"_Callback"}function l(t,e){var i={txt:t,handlerName:f(t)};return n(i.handlerName,e),o("zhhybrid/titleBar/button",i)}function d(){l("\u5237\u65b0",function(t,e){location.replace(""),e()}).then(function(){console.log("refresh-button created!")}).catch(function(t){warn(t)})}function s(t){o("zhhybrid/navigator/openGroup",t)}function h(t){o("zhhybrid/navigator/openPage",t)}function b(){o("zhhybrid/navigator/closeCurGroup")}function p(){o("zhhybrid/navigator/closeCurPage")}function w(t){t()}var y="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),v=y&&window.navigator.userAgent.toLowerCase(),g=(v&&v.indexOf("android"),v&&/iphone|ipad|ipod|ios/.test(v),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),m=Object.freeze({setNavigationBar:i,setNavigationBarTitle:r,setNavigationBarColor:a,setNavigationBarFontSize:c,setNavigationBarBackgroundColor:u,showRefreshButton:d,navigateTo:s,redirectTo:h,navigateBack:b,redirectBack:p}),B=Object.freeze({ready:w});return Object.assign({},m,B)}),setTimeout(function(){if(window.ZHHybridCallbacks.length>0)for(var t=0;t<window.ZHHybridCallbacks.length;t++)window.ZHHybridCallbacks[t]()},0)}.bind(window));