;/*!src/popularize/popularize.js*/
Vue.http.options.emulateJSON=!0;try{zh.onMenuShareWxTimeLine(SHARE_TIMELINE_CONFIG),zh.onMenuShareWxMessage(SHARE_CONFIG),zh.onMenuShareFeed(SHARE_CONFIG),zh.onMenuShareShearPlate(SHARE_CONFIG),zh.onMenuShareShearImpress(SHARE_CONFIG)}catch(e){console.error("不能正确的分享 请检查!")}var tipsbarView=Vue.extend({template:"#tipsbar-temp",props:["message","opened"]});Vue.component("tips-bar",tipsbarView);var TopbarView=Vue.extend({template:"#topbar-temp",data:function(){return{config:{rerelease:{title:"此机会已关闭，不再展示",desc:"重新发布，坐等合作伙伴上门",button:"重新发布"},goEdit:{title:"此机会由于内容质量不高，已被暂停发布",desc:"请及时修改",button:"去修改"},goExpand:{title:"此机会还没有人发现",desc:"立即推广，坐等合作伙伴上门",button:"立即推广"}},isStopped:isStopped,isAdminStopped:isAdminStopped,expanding:expanding}},watch:{isStopped:function(){App.offline=this.isStopped||this.isAdminStopped},isAdminStopped:function(){App.offline=this.isStopped||this.isAdminStopped}},computed:{currentType:function(){return this.isAdminStopped?"goEdit":this.isStopped?"rerelease":this.expanding?"":"goExpand"},tips:function(){return this.config[this.currentType]}},directives:{topbar:{inserted:function(e){setTimeout(function(){e.style.height=e.children[0].clientHeight+"px"},100)},update:function(e,t){setTimeout(function(){e.style.height=t.value?e.children[0].clientHeight+"px":"0px"},100)}}},methods:{btnEvent:function(){this[this.currentType]()},goEdit:function(){var e=wmpurl+"/wmp/user/"+appConfigId+"/resource/app/toCreate?id="+resourceId;zh&&zh.navigateTo?zh.navigateTo({url:e}):location.href=e},goExpand:function(){var e=wmpurl+"/wmp/user/"+appConfigId+"/resource/app/toExpand?resourceId="+resourceId;zh&&zh.navigateTo?zh.navigateTo({url:e}):location.href=e},rerelease:function(){var e=this;if(""!=App.DialogTask)return App.showDialog=!0;var t={resourceId:resourceId};this.$http.post("/wmp/user/"+appConfigId+"/resource/app/online",t).then(function(t){var i=t.body;try{i=JSON.parse(i)}catch(o){}return 0!=i.code?alert(i.msg):(e.isStopped=!1,App.showDialog=!1,void App.showTips("发布成功，展示排名已提升了"+i.data.upOrder+"名"))})}}});Vue.component("topBar",TopbarView);var Dialog=Vue.extend({template:"#dialog-temp",props:{opened:Boolean,task:String},computed:{tips:function(){return dialogConfig[this.task]}},methods:{onSwitch:function(){this.$emit("onswitch")},linkTo:function(){switch(this.task){case"goAuth":zh.notifyAuthstep({success:function(){App.verificationAuth(function(e){e&&(App.showDialog=!1,App.isIdentification=!0)})}}),zh.authstep();break;case"goEdit":zh.notifyProfileGuide({success:function(){App.showDialog=!1,App.complete=!0}}),zh.profileGuide();break;case"managerData":var e=dialogConfig.managerData.href;zh&&zh.redirectTo?zh.redirectTo({url:wmpurl+e}):location.href=e}}}});Vue.component("zh-dialog",Dialog);var App=new Vue({data:{currentTab:currentTab,scrollTop:0,elementTop:0,initTitle:"",chanceTitle:"",isMy:isMy,showDialog:!1,upLimit:upLimit,complete:complete,isIdentification:isIdentification,tipsSwich:!1,tipsMessage:"",offline:isStopped||isAdminStopped},computed:{DialogTask:function(){return this.upLimit?"managerData":this.complete?this.isIdentification?"":"goAuth":"goEdit"}},methods:{showTips:function(e){this.tipsSwich=!0,this.tipsMessage=e,setTimeout(function(){this.tipsSwich=!1}.bind(this),3e3)},showShare:function(){zh.showShareMenu()},linkToSetting:function(){zh.ready(function(){if(!resourceId)throw Error("缺失 resourceId");var e=wmpurl+"/wmp/user/"+appConfigId+"/resource/app/toExpand?resourceId="+resourceId;zh&&zh.navigateTo?zh.navigateTo({url:e}):location.href=e})},setTitle:function(e){"zh"in window&&zh.setNavigationBarTitle?zh.ready(function(){zh.setNavigationBarTitle(e)}):document.title=e},onscroll:function(){this.scrollTop=this.$el.scrollTop,this.scrollTop>this.elementTop?(""===this.initTitle&&(this.initTitle=document.title),this.setTitle(this.chanceTitle)):this.scrollTop<this.$refs.nav.offsetTop&&""!==this.initTitle&&this.setTitle(this.initTitle)}},mounted:function(){this.elementTop=this.$refs.nav.offsetTop+this.$refs.nav.offsetHeight,this.chanceTitle=this.$refs.title.innerText}}).$mount("#app");